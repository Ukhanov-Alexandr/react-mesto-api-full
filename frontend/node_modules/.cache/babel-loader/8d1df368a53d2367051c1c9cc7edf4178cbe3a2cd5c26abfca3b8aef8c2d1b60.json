{"ast":null,"code":"import React from\"react\";import PopupWithForm from\"./PopupWithForm\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import useFormValidations from\"../hoocks/useFormValidations\";import{editProfileInitialValues}from'../utils/constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditProfilePopup(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,onUpdateUser=_ref.onUpdateUser,isRequesting=_ref.isRequesting,handleOverlayClick=_ref.handleOverlayClick;var currentUser=React.useContext(CurrentUserContext);var _useFormValidations=useFormValidations(editProfileInitialValues),values=_useFormValidations.values,isErrors=_useFormValidations.isErrors,errorMessages=_useFormValidations.errorMessages,handleValueChange=_useFormValidations.handleValueChange,setValues=_useFormValidations.setValues,resetErrors=_useFormValidations.resetErrors;React.useEffect(function(){if(!!currentUser.name&&!!currentUser.about&&isOpen){setValues({\"input-name\":currentUser.name,\"input-about\":currentUser.about});resetErrors();}},[currentUser.name,currentUser.about,isOpen]);function handleSubmit(e){e.preventDefault();onUpdateUser({name:values[\"input-name\"],about:values[\"input-about\"]});}return/*#__PURE__*/_jsxs(PopupWithForm,{title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",name:\"edit\",isOpen:isOpen,onClose:onClose,onSubmit:handleSubmit,handleOverlayClick:handleOverlayClick,children:[/*#__PURE__*/_jsx(\"input\",{className:\"popup__input popup__input_type_name \".concat(isErrors[\"input-name\"]?'popup__input_type_error':''),name:\"input-name\",type:\"text\",placeholder:\"\\u0418\\u043C\\u044F\",required:true,minLength:\"2\",maxLength:\"40\",value:values[\"input-name\"],onChange:handleValueChange}),/*#__PURE__*/_jsx(\"span\",{className:\"form__input-error input-about-error \".concat(isErrors[\"input-name\"]?'popup__input-error_active':''),children:errorMessages[\"input-name\"]}),/*#__PURE__*/_jsx(\"input\",{className:\"popup__input popup__input_type_about \".concat(isErrors[\"input-about\"]?'popup__input_type_error':''),name:\"input-about\",type:\"text\",placeholder:\"\\u041E \\u0441\\u0435\\u0431\\u0435\",required:true,minLength:\"2\",maxLength:\"200\",value:values[\"input-about\"],onChange:handleValueChange}),/*#__PURE__*/_jsx(\"span\",{className:\"form__input-error input-about-error \".concat(isErrors[\"input-about\"]?'popup__input-error_active':''),children:errorMessages[\"input-about\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"popup__btn-save form__submit \".concat(Object.values(isErrors).some(function(item){return item;})?'form__submit_inactive':''),type:\"submit\",disabled:Object.values(isErrors).some(function(item){return item;}),children:isRequesting?'Сохранение..':\"Сохранить\"})]});}export default/*#__PURE__*/React.memo(EditProfilePopup);","map":{"version":3,"names":["React","PopupWithForm","CurrentUserContext","useFormValidations","editProfileInitialValues","EditProfilePopup","isOpen","onClose","onUpdateUser","isRequesting","handleOverlayClick","currentUser","useContext","values","isErrors","errorMessages","handleValueChange","setValues","resetErrors","useEffect","name","about","handleSubmit","e","preventDefault","Object","some","item","memo"],"sources":["C:/Users/Lenovo/dev/react-mesto-api-full/frontend/src/components/EditProfilePopup.js"],"sourcesContent":["import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport useFormValidations from \"../hoocks/useFormValidations\";\r\nimport {editProfileInitialValues} from '../utils/constants'\r\n\r\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser, isRequesting, handleOverlayClick}) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const {values, isErrors, errorMessages, handleValueChange, setValues, resetErrors} = useFormValidations(editProfileInitialValues);\r\n\r\n  React.useEffect(() => {\r\n    if (!!currentUser.name && !!currentUser.about && isOpen) {\r\n      setValues({ \"input-name\": currentUser.name, \"input-about\": currentUser.about });\r\n      resetErrors();\r\n    }\r\n  }, [currentUser.name, currentUser.about, isOpen]); \r\n\r\n  function handleSubmit(e){\r\n    e.preventDefault();\r\n    onUpdateUser({\r\n        name: values[\"input-name\"],\r\n        about: values[\"input-about\"]\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title=\"Редактировать профиль\"\r\n      name=\"edit\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      handleOverlayClick={handleOverlayClick}\r\n    >\r\n      <input\r\n        className={`popup__input popup__input_type_name ${isErrors[\"input-name\"] ? 'popup__input_type_error' : '' }`}\r\n        name=\"input-name\"\r\n        type=\"text\"\r\n        placeholder=\"Имя\"\r\n        required\r\n        minLength=\"2\"\r\n        maxLength=\"40\"\r\n        value={values[\"input-name\"]}\r\n        onChange={handleValueChange}\r\n      />\r\n      <span className={`form__input-error input-about-error ${isErrors[\"input-name\"] ? 'popup__input-error_active' : '' }`}>{errorMessages[\"input-name\"]}</span>\r\n      <input\r\n        className={`popup__input popup__input_type_about ${isErrors[\"input-about\"] ? 'popup__input_type_error' : '' }`}\r\n        name=\"input-about\"\r\n        type=\"text\"\r\n        placeholder=\"О себе\"\r\n        required\r\n        minLength=\"2\"\r\n        maxLength=\"200\"\r\n        value={values[\"input-about\"]}\r\n        onChange={handleValueChange}\r\n      />\r\n      <span className={`form__input-error input-about-error ${isErrors[\"input-about\"] ? 'popup__input-error_active' : '' }`}>{errorMessages[\"input-about\"]}</span>\r\n      <button \r\n        className={`popup__btn-save form__submit ${Object.values(isErrors).some((item) => item) ? 'form__submit_inactive' : ''}`} \r\n        type=\"submit\" \r\n        disabled={Object.values(isErrors).some((item) => item)} >\r\n        {isRequesting ? 'Сохранение..' : \"Сохранить\"}\r\n      </button>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default React.memo(EditProfilePopup);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}