{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Lenovo/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Lenovo/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/Lenovo/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Lenovo/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{data}from\"autoprefixer\";// import { apiConfig } from './constants'\nvar apiConfig={url:\"https://nomoreparties.co/v1/cohort-45\",headers:{authorization:\"672e954f-60da-45a7-8529-433a3c093bb6\",\"Content-Type\":\"application/json\"}};var Api=/*#__PURE__*/function(){function Api(config){_classCallCheck(this,Api);this._url=config.url;this._headers=config.headers;}_createClass(Api,[{key:\"_checkResponse\",value:function(){var _checkResponse2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(res){var errorCode,err;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!res.ok){_context.next=2;break;}return _context.abrupt(\"return\",res.json());case 2:errorCode=res.status;_context.next=5;return res.json();case 5:err=_context.sent;err.errorCode=errorCode;return _context.abrupt(\"return\",Promise.reject(err));case 8:case\"end\":return _context.stop();}}},_callee);}));function _checkResponse(_x){return _checkResponse2.apply(this,arguments);}return _checkResponse;}()},{key:\"getUser\",value:function getUser(){var _this=this;return fetch(\"\".concat(this._url,\"/users/me\"),{method:\"GET\",headers:this._headers}).then(function(res){return _this._checkResponse(res);});}},{key:\"getCards\",value:function getCards(){var _this2=this;return fetch(\"\".concat(this._url,\"/cards\"),{method:\"GET\",headers:this._headers}).then(function(res){return _this2._checkResponse(res);});}},{key:\"patchProfile\",value:function patchProfile(data){var _this3=this;return fetch(\"\".concat(this._url,\"/users/me\"),{method:\"PATCH\",headers:this._headers,body:JSON.stringify({name:data.name,about:data.about})}).then(function(res){return _this3._checkResponse(res);});}},{key:\"addNewCard\",value:function addNewCard(data){var _this4=this;return fetch(\"\".concat(this._url,\"/cards\"),{method:\"POST\",headers:this._headers,body:JSON.stringify({name:data.name,link:data.link})}).then(function(res){return _this4._checkResponse(res);});}},{key:\"deleteCard\",value:function deleteCard(cardId){var _this5=this;return fetch(\"\".concat(this._url,\"/cards/\").concat(cardId),{method:\"DELETE\",headers:this._headers}).then(function(res){return _this5._checkResponse(res);});}},{key:\"setlikeCard\",value:function setlikeCard(cardId){var _this6=this;return fetch(\"\".concat(this._url,\"/cards/\").concat(cardId,\"/likes\"),{method:\"PUT\",headers:this._headers}).then(function(res){return _this6._checkResponse(res);});}},{key:\"unlikeCard\",value:function unlikeCard(cardId){var _this7=this;return fetch(\"\".concat(this._url,\"/cards/\").concat(cardId,\"/likes\"),{method:\"DELETE\",headers:this._headers}).then(function(res){return _this7._checkResponse(res);});}},{key:\"setNewAvatar\",value:function setNewAvatar(data){var _this8=this;return fetch(\"\".concat(this._url,\"/users/me/avatar\"),{method:\"PATCH\",headers:this._headers,body:JSON.stringify({avatar:data})}).then(function(res){return _this8._checkResponse(res);});}}]);return Api;}();var api=new Api(apiConfig);export default api;","map":{"version":3,"names":["data","apiConfig","url","headers","authorization","Api","config","_url","_headers","res","ok","json","errorCode","status","err","Promise","reject","fetch","method","then","_checkResponse","body","JSON","stringify","name","about","link","cardId","avatar","api"],"sources":["C:/Users/Lenovo/dev/react-mesto-api-full/frontend/src/utils/api.js"],"sourcesContent":["import { data } from \"autoprefixer\";\r\n// import { apiConfig } from './constants'\r\n\r\nconst apiConfig = {\r\n  url: \"https://nomoreparties.co/v1/cohort-45\",\r\n  headers: {\r\n    authorization: \"672e954f-60da-45a7-8529-433a3c093bb6\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nclass Api {\r\n  constructor(config) {\r\n    this._url = config.url;\r\n    this._headers = config.headers;\r\n  }\r\n\r\n  async _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    const errorCode = res.status;\r\n    const err = await res.json();\r\n    err.errorCode = errorCode;\r\n    return Promise.reject(err);\r\n  }\r\n\r\n  getUser() {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: \"GET\",\r\n      headers: this._headers,\r\n    }).then((res) => this._checkResponse(res));\r\n  }\r\n\r\n  getCards() {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: \"GET\",\r\n      headers: this._headers,\r\n    }).then((res) => this._checkResponse(res));\r\n  }\r\n\r\n  patchProfile(data) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        about: data.about,\r\n      }),\r\n    }).then((res) => this._checkResponse(res));\r\n  }\r\n\r\n  addNewCard(data) {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        link: data.link,\r\n      }),\r\n    }).then((res) => this._checkResponse(res));\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._url}/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then((res) => this._checkResponse(res));\r\n  }\r\n\r\n  setlikeCard(cardId) {\r\n    return fetch(`${this._url}/cards/${cardId}/likes`, {\r\n      method: \"PUT\",\r\n      headers: this._headers,\r\n    }).then((res) => this._checkResponse(res));\r\n  }\r\n\r\n  unlikeCard(cardId) {\r\n    return fetch(`${this._url}/cards/${cardId}/likes`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then((res) => this._checkResponse(res));\r\n  }\r\n\r\n  setNewAvatar(data) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: data,\r\n      }),\r\n    }).then((res) => this._checkResponse(res));\r\n  }\r\n}\r\n\r\nconst api = new Api(apiConfig);\r\n\r\nexport default api;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}